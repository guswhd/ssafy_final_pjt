%YAML:1.0

# --- 센서 설정 ---
imu: 1
num_of_cam: 2          # [변경됨] 2: Stereo + IMU 모드

# --- ROS 2 토픽 이름 ---
imu_topic: "/camera/camera/imu"
image0_topic: "/camera/camera/infra1/image_rect_raw"
image1_topic: "/camera/camera/infra2/image_rect_raw"  # [추가됨] 오른쪽 카메라 토픽

output_path: "/tmp/"

# --- 카메라 캘리브레이션 파일 경로 (상대 경로) ---
cam0_calib: "realsense_d435i/left.yaml"
cam1_calib: "realsense_d435i/right.yaml"              # [추가됨] 오른쪽 카메라 설정 파일

image_width: 640
image_height: 480

# --- IMU-Camera 간 변환 행렬 (Extrinsic) ---
estimate_extrinsic: 1   # 1: 초기값을 바탕으로 VINS가 미세조정함

# (D435i 왼쪽 카메라 - IMU 간 변환)
body_T_cam0: !!opencv-matrix
   rows: 4
   cols: 4
   dt: d
   data: [ 1, 0, 0, -0.01,
           0, 1, 0, 0,
           0, 0, 1, 0,
           0, 0, 0, 1 ]

# [추가됨] (D435i 오른쪽 카메라 - IMU 간 변환)
# x축으로 약 50mm(0.05m) 떨어져 있음을 명시
body_T_cam1: !!opencv-matrix
   rows: 4
   cols: 4
   dt: d
   data: [ 1, 0, 0, 0.04,
           0, 1, 0, 0,
           0, 0, 1, 0,
           0, 0, 0, 1 ]

# --- 기타 알고리즘 설정 ---
multiple_thread: 1
max_cnt: 150
min_dist: 30
freq: 10
F_threshold: 1.0
show_track: 1
flow_back: 1

# Optimization
max_solver_time: 0.04
max_num_iterations: 8
keyframe_parallax: 10.0

# IMU Noise (빠른 움직임에 대비해 약간 높임)
acc_n: 0.2          # 0.1 -> 0.2
gyr_n: 0.02         # 0.01 -> 0.02
acc_w: 0.0002
gyr_w: 2.0e-5
g_norm: 9.805

estimate_td: 0
td: 0.00
load_previous_pose_graph: 0
pose_graph_save_path: "/tmp/pose_graph/"
save_image: 0